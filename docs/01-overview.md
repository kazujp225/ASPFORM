# システム概要

## 1. プロダクト名
**契約確認・同意メール生成システム（ASPFORM）**

## 2. 解決する課題

| 課題 | 解決策 |
|------|--------|
| 営業担当ごとにメールシステムを分けるとコスト爆増 | 1システムで複数ドメイン（RAISE/NextFrontier等）を吸収 |
| 手動説明＋コピペ運用はミス多発 | システム化で証跡を自動保存 |
| 「ちゃんとしてる感」が足りない | 電子契約風UIで信頼感を演出 |

## 3. コアコンセプト

```
営業が電話中に → URLコピー → 顧客に送付 → 顧客が入力・同意 → mailto起動 → 送信
```

**ポイント**: システムからメール送信しない = ドメイン認証地獄を回避

## 4. 主要な設計決定

| 項目 | 決定 | 理由 |
|------|------|------|
| 認証 | 固定ID/パスワード | 運用の軽さ優先 |
| 宛先管理 | グループ単位＋トークン（`?u=XXX`） | 人の入替りに強い |
| メール送信 | mailto方式（システム送信なし） | 低コスト・認証不要 |
| 証跡 | rendered_*をDB保存 | 過去ログ不変性を担保 |

## 5. 技術スタック

| レイヤー | 技術 |
|----------|------|
| フロントエンド | Next.js 14 (App Router) |
| UIライブラリ | shadcn/ui + Tailwind CSS |
| バックエンド | Next.js API Routes |
| データベース | Supabase (PostgreSQL) |
| 認証 | シンプルセッション（固定ID/PW） |
| ホスティング | Vercel or Render |

## 6. MVP合格基準

- [ ] 営業が**1分以内**にURLコピー→顧客送付できる
- [ ] 顧客が**迷わず**メール作成まで到達できる
- [ ] 後から「この内容で同意した」が**ログで確認**できる
- [ ] 月額ランニング **1,000〜1,500円以内**

## 7. スコープ

### MVP（v1.0）
- 管理画面：ログイン、グループ管理、プラン管理、履歴
- 顧客画面：入力→確認→同意→mailto
- セキュリティ：ドメイン制限、トークン失効（90日）

### スコープ外（v2.0以降）
- SMS自動送信
- 電子署名・本人性担保
- CRM連携
- 多言語対応
- 権限管理（個人アカウント、ロール）
